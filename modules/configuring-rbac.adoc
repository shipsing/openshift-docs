// Module is included in the following assemblies:
//
// * managing_cluster_configuration/managing-openshift-cluster-configuration.adoc

:_mod-docs-content-type: PROCEDURE
[id="configuring-rbac_{context}"]
= configuring RBAC

You must configure Role Based Access Control (RBAC) to provide the sufficient access to the users to work with the default instance.

The `defaultPolicy` of the instance is an empty string that means no role is assigned automatically. Though users can log into the instance, but they have no permissions to view anything or perform any tasks in the Argo CD UI.
The instance includes two groups, `system:cluster-admins` and `cluster-admins`. You can add your user to the `cluster-admins` group to enable them to perform tasks in Argo CD, such as deploying applications.
The `system:cluster-admins` group only applies to the temporary `kube-admin` credential and can be ignored.


NOTE:
Ensure to not change the `defaultPolicy` to assign the `role:admin` by default because all users will have admin permissions to log in to the Argo CD instance, which is not recommended. 

.Prerequisite

* You have login credentials to access the {OCP} cluster with `cluster-admin` privileges.
* You have installed the `oc` CLI.

.Procedure

. View the Operator configured RBAC for the default instance:
+
[source,terminal]
----
$ oc get argocd openshift-gitops -n openshift-gitops -o=jsonpath='{.spec.rbac}'
----
.Output
+
[source,json]
----
{"defaultPolicy":"","policy":"g, system:cluster-admins, role:admin\ng, cluster-admins, role:admin\n","scopes":"[groups]"}
----
+

. Create the `cluster-admins` group and add your user to it:
+
[source,terminal]
----
$ oc adm groups new cluster-admins <user>
----

* Replace <user> with the actual username.

.Output
+
[source,terminal]
----
group.user.openshift.io/cluster-admins created
----

[NOTE]
====
For a self-managed ROSA cluster, run the `oc get groups` command to check if the `cluster-admins` group exists and if your user is a part of the group in the output. If your user is not part of the group, add it to the group with the `oc adm groups add-users cluster-admins <user>`. 
====


.Verification

. Validate that the group `cluster-admins` exists and that your user is a part of it:
+
[source,terminal]
----
$ oc get groups cluster-admins
----
.Output
+
[source,terminal]
----
NAME             USERS

cluster-admins   <user>
----

[IMPORTANT]
====
After creating or editing the `cluster-admins` group, ensure to log out of the Argo CD instance and then log back in again so that your changes reflect in the UI. check the User Info section to validate that you have been assigned to the cluster-admins group within Argo CD.
====


